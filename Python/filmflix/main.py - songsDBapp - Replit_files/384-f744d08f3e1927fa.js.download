!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="547b7653-54b8-4032-91af-031682336090",e._sentryDebugIdIdentifier="sentry-dbid-547b7653-54b8-4032-91af-031682336090")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"1582e009"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[384],{76673:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e,t){var n=t.existing,r=t.getKey,i=new Map,l=!0,a=!1,o=void 0;try{for(var u,s=e[Symbol.iterator]();!(l=(u=s.next()).done);l=!0){var c=u.value;i.set(r(c),c)}}catch(e){a=!0,o=e}finally{try{l||null==s.return||s.return()}finally{if(a)throw o}}var d=new Set,p=[],h=!0,f=!1,g=void 0;try{for(var v,m=n[Symbol.iterator]();!(h=(v=m.next()).done);h=!0){var b=v.value,y=r(b),w=i.get(y);w&&(p.push(w),d.add(y))}}catch(e){f=!0,g=e}finally{try{h||null==m.return||m.return()}finally{if(f)throw g}}var Z=!0,_=!1,R=void 0;try{for(var x,C=e[Symbol.iterator]();!(Z=(x=C.next()).done);Z=!0){var S=x.value;d.has(r(S))||p.push(S)}}catch(e){_=!0,R=e}finally{try{Z||null==C.return||C.return()}finally{if(_)throw R}}return p}},30384:function(e,t,n){n.d(t,{Z:function(){return t$}});var r,i,l=n(42516),a=n(74985),o=n(74833),u=n(56596),s=n(29479),c=n(88936),d=n(29287),p=n(32147),h=n(27387),f=n(41733),g=n(30509),v=n(66626),m=n(96583),b=n(7444),y=n(59868),w=n(12285),Z=n(4955),_=n(14105),R=n(9670),x=n(72310),C=n(71565),S=n(3341),T=n.n(S),I=n(75582),V=n(50959),U=n(66555),G=n(69273),P=n(21262),E=n(71440),F=n(58995);function k(){var e=(0,P._)(["\n  query ReplPublishInputRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return k=function(){return e},e}var D={},B=(0,E.Ps)(k(),p.FW),W=n(99165);function X(){var e=(0,P._)(["\n  mutation UseSetReplTagsSetTags($input: SetReplTagsInput!) {\n    setReplTags(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return X=function(){return e},e}var N={},L=(0,E.Ps)(X(),p.FW);function M(e){var t,n,r,i,l,a,o;return e.error?e.error.message||"Something went wrong saving your Repl Tags":(null===(n=e.data)||void 0===n?void 0:null===(t=n.setReplTags)||void 0===t?void 0:t.__typename)==="NotFoundError"||(null===(i=e.data)||void 0===i?void 0:null===(r=i.setReplTags)||void 0===r?void 0:r.__typename)==="UnauthorizedError"||(null===(a=e.data)||void 0===a?void 0:null===(l=a.setReplTags)||void 0===l?void 0:l.__typename)==="UserError"?e.data.setReplTags.message:(null===(o=e.data)||void 0===o?void 0:o.setReplTags)&&"Repl"!==e.data.setReplTags.__typename?"Something went wrong posting your Repl":void 0}function z(){var e=(0,P._)(["\n  mutation SetReplViewSettingsSetSettings($input: SetReplViewSettingsInput!) {\n    setReplViewSettings(input: $input) {\n      ... on ReplViewSettings {\n        id\n        repl {\n          id\n          ...PublishReplData\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return z=function(){return e},e}var A={},O=(0,E.Ps)(z(),p.FW);function j(e){var t,n,r,i,l,a,o;return e.error?e.error.message||"Something went wrong saving your Cover page":(null===(n=e.data)||void 0===n?void 0:null===(t=n.setReplViewSettings)||void 0===t?void 0:t.__typename)==="NotFoundError"||(null===(i=e.data)||void 0===i?void 0:null===(r=i.setReplViewSettings)||void 0===r?void 0:r.__typename)==="UnauthorizedError"||(null===(a=e.data)||void 0===a?void 0:null===(l=a.setReplViewSettings)||void 0===l?void 0:l.__typename)==="UserError"?e.data.setReplViewSettings.message:(null===(o=e.data)||void 0===o?void 0:o.setReplViewSettings)&&"ReplViewSettings"!==e.data.setReplViewSettings.__typename?"Something went wrong saving your Cover page":void 0}function K(){var e=(0,P._)(["\n  mutation UpdateReplUpdate($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return K=function(){return e},e}var H={},J=(0,E.Ps)(K(),p.FW);function $(e){return e.message||"Something went wrong saving updates to your Repl"}function Y(e){return"repl_file"===e||"repl_image"===e}(r=i||(i={})).ReplFile="repl_file",r.ReplImage="repl_image";var q=function(e){"use strict";(0,Z._)(n,e);var t=(0,R._)(n);function n(){return(0,w._)(this,n),t.apply(this,arguments)}return n}((0,_._)(Error)),Q=function(e){"use strict";(0,Z._)(n,e);var t=(0,R._)(n);function n(){return(0,w._)(this,n),t.apply(this,arguments)}return n}((0,_._)(Error)),ee=function(e){"use strict";(0,Z._)(n,e);var t=(0,R._)(n);function n(){return(0,w._)(this,n),t.apply(this,arguments)}return n}((0,_._)(Error));function et(e){return e?e.length>60?{message:"Title should not be more than ".concat(60," characters")}:void 0:{message:"Give your Repl a title"}}function en(e){return e?e.length>1e3?{message:"Description should not be more than ".concat(1e3," characters")}:void 0:{message:"What does this Repl do?"}}var er=(0,V.createContext)(null),ei=function(e){var t=(0,V.useContext)(er);if(!t)throw Error("usePublishField must be used within a PublishInputContext");return t["".concat(e,"Field")]},el=function(){var e=(0,V.useContext)(er);if(!e)throw Error("usePublishForm must be used within a PublishInputContext");return e},ea=n(1498),eo=n(37951),eu=n(38080),es=n(30983),ec=n(40102),ed=n(12874),ep=n(81799),eh=n(20573),ef=n(49996),eg=n(36032),ev=n(30084),em=n(93496),eb=n(32377),ey=u.K.button,ew=function(){return(0,a.tZ)(u.G,{css:[d.l0.flex.row,d.l0.flex.grow(1),{borderTop:"1px solid ".concat(d.TV.outlineDimmest)}]})},eZ=function(e){var t=e.isActive,n=e.isComplete,r=e.children,i=e.onClick,l=e.disabled;return(0,a.BX)(ey,{type:"button",css:[d.l0.reset.button,d.l0.position.relative,em.gU.nofill,t&&d.l0.backgroundColor.backgroundHigher,d.l0.p(4),d.l0.borderRadius(4)],onClick:i,disabled:l,children:[(0,a.tZ)(o.xv,{variant:"small",multiline:!1,children:r}),n?(0,a.tZ)(eb.Z,{size:6,strokeWidth:6,color:d.TV.foregroundDimmer,css:[d.l0.position.absolute,{top:2,right:-2}]}):null]})},e_=n(76819),eR=n(48459);function ex(e){var t=e.error,n=e.dataCy;return t?(0,a.BX)(u.G,{css:[d.l0.rowWithGap(4),d.l0.align.center],children:[(0,a.tZ)(eh.Z,{css:[d.l0.color.accentNegativeStronger]}),(0,a.tZ)(o.xv,{css:[d.l0.flex.growAndShrink(1),d.l0.color.accentNegativeStronger],dataCy:n,children:t.message})]}):null}var eC=n(59520),eS=n(31366),eT=n(42308),eI=n(6187),eV=n(76673),eU=n(57526),eG=n(2161),eP=n(18836),eE=n(82723);function eF(){var e=(0,P._)(["\n  fragment PublishableReplSelectorRepl on Repl {\n    id\n    title\n    timeUpdated\n    url\n    slug\n    owner {\n      ... on User {\n        id\n        username\n        image\n      }\n      ... on Team {\n        id\n        username\n        image\n      }\n    }\n    iconUrl\n  }\n"]);return eF=function(){return e},e}function ek(){var e=(0,P._)(["\n  query PublishableReplSelector($search: String!) {\n    currentUser {\n      id\n      publishableReplSearch(search: $search) {\n        id\n        ...PublishableReplSelectorRepl\n      }\n    }\n  }\n  ","\n"]);return ek=function(){return e},e}var eD={},eB=(0,E.Ps)(eF()),eW=(0,E.Ps)(ek(),eB),eX=u.K.div,eN=u.K.li,eL={searchValue:"",loading:!1,repls:[]};function eM(e,t){switch(t.type){case"data":var n,r=(null===(n=t.data.currentUser)||void 0===n?void 0:n.publishableReplSearch)||[];return(0,g._)((0,f._)({},e),{loading:!1,repls:(0,eV.Z)(r,{existing:e.repls,getKey:function(e){return e.id}})});case"loading":return(0,g._)((0,f._)({},e),{loading:!0});case"searchValue":return(0,g._)((0,f._)({},e),{searchValue:t.searchValue})}}function ez(e){var t;return e?"".concat(null===(t=e.owner)||void 0===t?void 0:t.username,"/").concat(e.title):""}function eA(e){var t,n=(0,V.useRef)(null);(0,eC.rf)(function(){var t;e.selectedRepl&&(null===(t=n.current)||void 0===t||t.blur())},[e.selectedRepl]);var r=(null===(t=e.selectedRepl)||void 0===t?void 0:t.iconUrl)&&e.inputValue&&ez(e.selectedRepl)===e.inputValue?(0,a.tZ)(u.G,{css:[d.l0.px(8),d.l0.center,{position:"absolute",top:0,left:0,height:"100%"}],children:(0,a.tZ)(eG.ZP,{alt:e.selectedRepl.title,iconUrl:e.selectedRepl.iconUrl,size:16})}):null;return(0,a.BX)(u.G,{css:[{position:"relative"}],children:[(0,a.BX)(eX,(0,g._)((0,f._)({},e.getComboboxProps()),{css:{position:"relative"},children:[r,(0,a.tZ)(eP.II,(0,f._)({css:[d.l0.pr(32),r&&d.l0.pl(32)]},e.getInputProps({placeholder:"Search for a Repl",onFocus:e.onFocus,ref:n}))),(0,a.tZ)(u.G,{css:[d.l0.center,d.l0.px(8),{position:"absolute",top:0,right:0,height:"100%"}],children:e.loading&&e.isOpen?(0,a.tZ)(c.Z,{}):(0,a.tZ)(eE.Z,{})})]})),(0,a.tZ)(eX,(0,g._)((0,f._)({},e.getMenuProps()),{css:{position:"relative"},children:e.isOpen?(0,a.BX)(eS.Z,{children:[e.loading&&0===e.repls.length?(0,a.tZ)(eN,{css:[d.l0.center,d.l0.py(32)],children:(0,a.tZ)(c.Z,{})}):null,e.loading||0!==e.repls.length?null:(0,a.tZ)(eN,{css:[d.l0.center,d.l0.py(32)],children:(0,a.tZ)(o.xv,{color:"dimmer",variant:"small",multiline:!1,children:"No Repls found"})}),e.repls.map(function(t,n){return(0,a.tZ)(eN,(0,g._)((0,f._)({},e.getItemProps({item:t,index:n})),{children:(0,a.tZ)(eT.Z,{taller:!0,filter:"",title:ez(t),subtitle:(0,eU.F)(t.timeUpdated),selected:e.selectedRepl===t,highlighted:e.highlightedIndex===n,icon:t.iconUrl?(0,a.tZ)(eG.ZP,{iconUrl:t.iconUrl,alt:t.title,size:16}):void 0})}),t.id)})]}):null}))]})}var eO=n(10981),ej=n(21371),eK=u.K.label,eH=(0,V.forwardRef)(function(e,t){return(0,a.tZ)(eK,(0,g._)((0,f._)({},e),{ref:t,css:d.l0.color.foregroundDimmer}))}),eJ=function(){var e,t,n,r,i,l,o,s=(0,eO.U)()("repl"),c=ei("replId"),p=ei("iconUrl"),h=(t=(e=(0,v._)((0,V.useReducer)(eM,eL),2))[0],n=e[1],l=(r={variables:{search:(0,eI.Z)(t.searchValue,200)},notifyOnNetworkStatusChange:!0,onCompleted:function(e){n({type:"data",data:e})}},i=(0,f._)({},eD,r),F.a(eW,i)).loading,(0,V.useEffect)(function(){l&&n({type:"loading"})},[l]),o=(0,V.useCallback)(function(e){return n({type:"searchValue",searchValue:e||""})},[]),{repls:t.repls,loading:t.loading,searchValue:t.searchValue,setSearchValue:o}),m=(0,ej.Kb)({id:s,items:h.repls,initialHighlightedIndex:-1,onInputValueChange:function(e){var t=e.inputValue;h.setSearchValue(t)},onSelectedItemChange:function(e){(null==e?void 0:e.selectedItem)&&(c.setValue(e.selectedItem.id),m.closeMenu())},itemToString:ez});return(0,a.BX)(u.G,{css:[d.l0.colWithGap(4)],children:[(0,a.tZ)(eH,{css:d.l0.color.foregroundDimmer,htmlFor:s,children:"Repl"}),(0,a.tZ)(eA,{getComboboxProps:m.getComboboxProps,getInputProps:m.getInputProps,getItemProps:m.getItemProps,getMenuProps:m.getMenuProps,isOpen:m.isOpen,highlightedIndex:m.highlightedIndex,inputValue:m.inputValue,selectedRepl:m.selectedItem?(0,g._)((0,f._)({},m.selectedItem),{iconUrl:p.value||m.selectedItem.iconUrl}):void 0,repls:h.repls,loading:h.loading,onFocus:function(e){m.selectedItem&&(e.preventDefault(),e.currentTarget.select(),h.setSearchValue("")),m.openMenu()}})]})},e$=function(){var e=(0,eO.U)(),t=e("replName"),n=e("replDescription"),r=el(),i=r.replIdField,l=r.replTitleField,s=r.replDescriptionField,c=r.isSaving;return(0,a.BX)(u.G,{css:[d.l0.colWithGap(16),d.l0.flex.growAndShrink(1)],children:[!i.value||i.touched?(0,a.tZ)(eJ,{}):null,(0,a.BX)(u.G,{css:[d.l0.colWithGap(4)],children:[(0,a.tZ)(u.G,{css:[d.l0.flex.row,d.l0.align.baseline,d.l0.justify.spaceBetween],children:(0,a.tZ)(eH,{css:[d.l0.color.foregroundDimmer,{lineHeight:d.TV.lineHeightSmall}],htmlFor:t,children:"Repl name"})}),l.value]}),(0,a.BX)(u.G,{css:[d.l0.colWithGap(4)],children:[(0,a.BX)(u.G,{css:[d.l0.flex.row,d.l0.align.baseline,d.l0.justify.spaceBetween],children:[(0,a.tZ)(eH,{css:[d.l0.color.foregroundDimmer,{lineHeight:d.TV.lineHeightSmall}],htmlFor:n,children:"Repl description"}),(0,a.BX)(o.xv,{multiline:!1,css:{color:s.value.length>1e3?d.TV.accentNegativeStronger:d.TV.foregroundDimmest},children:[s.value.length,"/",1e3]})]}),(0,a.tZ)(eP.B,{id:n,value:s.value,disabled:!i.value||c,onChange:function(e){s.setValue(e.currentTarget.value)},placeholder:"What does this Repl do?",css:[d.l0.minHeight(128),d.l0.maxHeight(256),{resize:"vertical"}],dataCy:"publish-form-repl-description-input"}),s.touched?(0,a.tZ)(ex,{error:s.error,dataCy:"publish-form-repl-description-error"}):null]})]})},eY=function(e){var t=e.showPlayButton,n=e.children,r=e.active;return(0,a.BX)("div",{css:{position:"relative",aspectRatio:"".concat(268,"/").concat(164),overflow:"hidden"},children:[(0,a.tZ)("div",{css:{position:"absolute",top:"calc(".concat(18," / ").concat(164," * 100%)"),bottom:"calc(".concat(1," / ").concat(164," * 100%)"),left:"calc(".concat(1," / ").concat(268," * 100%)"),right:"calc(".concat(1," / ").concat(268," * 100%)"),borderBottomLeftRadius:4,borderBottomRightRadius:4,overflow:"hidden",backgroundColor:r?d.TV.accentPrimaryDimmest:void 0},children:n}),(0,a.BX)("svg",{viewBox:"0 0 268 164",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:{position:"relative"},children:[(0,a.tZ)("rect",{width:"268",height:"17",fill:d.TV.backgroundDefault}),(0,a.tZ)("rect",{x:"241.5",y:"4.5",width:"22",height:"10",rx:"2",fill:d.TV.accentPositiveDimmer}),(0,a.tZ)("rect",{x:"228.5",y:"4.5",width:"10",height:"10",rx:"2",fill:d.TV.backgroundHighest}),(0,a.tZ)("rect",{x:"4.5",y:"4.5",width:"32",height:"10",rx:"2",fill:d.TV.backgroundHighest}),(0,a.tZ)("rect",{x:"1",y:"18",width:"266",height:"1",fill:r?d.TV.accentPrimaryDefault:d.TV.outlineDimmer}),t?(0,a.tZ)("path",{d:"M142.225 90.5642C142.565 90.7554 142.565 91.2446 142.225 91.4358L127.745 99.5809C127.412 99.7683 127 99.5275 127 99.1451L127 82.8549C127 82.4725 127.412 82.2317 127.745 82.4191L142.225 90.5642Z",fill:d.TV.white}):null,(0,a.tZ)("rect",{x:"1",y:"1",width:"266",height:"162",rx:"4",stroke:r?d.TV.accentPrimaryDefault:d.TV.outlineDimmer,strokeWidth:"1"})]})]})},eq=n(43312),eQ=n(54843),e0=n(19659),e1=u.K.ol,e2=u.K.li,e4=(0,eq.iv)([d.l0.py(4),d.l0.borderRadius(8),{border:"1px solid ".concat(d.TV.outlineDimmest),borderRadius:d.TV.borderRadius8,backgroundColor:em.vb.interactiveBackground,zIndex:d.n0,maxHeight:300,position:"absolute",overflowY:"auto",width:"100%",left:0,top:d.TV.space8,listStyle:"none"}]),e3={backgroundColor:em.vb.interactiveBackgroundActive},e5={backgroundColor:d.TV.accentPrimaryDimmer},e6=(0,eq.iv)([d.l0.p(8),{":not([disabled])":{cursor:"pointer",":hover":(0,f._)({},e3),":active":(0,f._)({},e5)}}]);function e8(e){var t,n,r,i,l,s,c,p,y,w,Z,_,R,x,C,S,T=e.fs,I=e.initiallySelectedFile,U=e.onFileSelect,G=e.onClear,P=(0,V.useRef)(null),E=(n=(t=(0,v._)((0,V.useState)({isLoading:!0,error:null,files:[]}),2))[0],r=t[1],(0,V.useEffect)(function(){function e(){return(e=(0,h._)(function(){var e,t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,T.listFiles()];case 1:if((e=n.sent()).error)throw Error(e.error);return r({isLoading:!1,error:null,files:(null!==(t=e.files)&&void 0!==t?t:[]).slice().sort(function(e,t){return e.localeCompare(t)}).map(function(e){return{file:e,pathDepth:(0,e0.U$)(e)}}).sort(function(e,t){return e.pathDepth-t.pathDepth}).map(function(e){return e.file})}),[3,3];case 2:return n.sent(),r({isLoading:!1,error:"Could not load files",files:[]}),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[T]),(0,f._)({},n)),F=E.isLoading,k=E.files,D=E.error,B=(l=(i={files:k,inputRef:P,initiallySelectedFile:I}).files,s=i.inputRef,c=i.initiallySelectedFile,y=(p=(0,v._)((0,V.useState)(!1),2))[0],w=p[1],_=(Z=(0,v._)((0,V.useState)(l),2))[0],R=Z[1],x=(0,V.useCallback)(function(e){return l.filter(function(t){return t.toLowerCase().includes(e.toLowerCase())})},[l]),C=(0,ej.Kb)({items:_,isOpen:y,initialInputValue:c,initialSelectedItem:_.find(function(e){return e===c}),onIsOpenChange:function(e){w(!!e.isOpen)},onInputValueChange:function(e){var t;R(x(null!==(t=e.inputValue)&&void 0!==t?t:""))}}),S=(0,V.useCallback)(function(){var e;w(!1),null===(e=s.current)||void 0===e||e.blur()},[s]),(0,V.useEffect)(function(){var e;R(x(null!==(e=C.inputValue)&&void 0!==e?e:""))},[l,x,C.inputValue]),(0,V.useEffect)(function(){C.selectedItem&&S()},[C.selectedItem,S]),(0,g._)((0,f._)({},C),{closeMenu:S,items:_})),W=(0,b.Z)(U);return(0,V.useEffect)(function(){B.selectedItem&&W.current(B.selectedItem)},[B.selectedItem,W]),(0,a.BX)(u.G,{children:[(0,a.tZ)(u.G,(0,g._)((0,f._)({},B.getComboboxProps({refKey:"innerRef"})),{css:[d.l0.position.relative],children:(0,a.tZ)(eQ.E,(0,g._)((0,f._)({},B.getInputProps({onFocus:B.openMenu,ref:P,refKey:"inputRef",disabled:F,placeholder:"Search your files"})),{onClear:function(){var e;B.reset(),null===(e=P.current)||void 0===e||e.focus(),G()},loading:F}))})),(0,a.BX)(u.G,(0,g._)((0,f._)({},B.getMenuProps({refKey:"innerRef"})),{css:[d.l0.position.relative],children:[D?(0,a.tZ)(u.G,{css:[d.l0.p(8)],children:(0,a.tZ)(o.xv,{multiline:!1,children:"Something went wrong loading your files. Please try again."})}):null,!D&&B.isOpen?(0,a.tZ)(e1,{css:[e4],children:B.items.length>0?B.items.map(function(e,t){return(0,a.tZ)(e2,(0,g._)((0,f._)({css:[e6,B.highlightedIndex===t&&e3,e===B.selectedItem&&e5]},B.getItemProps({item:e,index:t,onClick:function(){B.closeMenu()}})),{children:(0,a.tZ)(o.xv,{multiline:!1,children:e})}),e)}):(0,a.tZ)(e2,{css:[d.l0.p(8)],children:(0,a.BX)(o.xv,{multiline:!1,children:['No files found for "',B.inputValue,'"']})})}):null]}))]})}var e9=n(43973),e7=function(e){var t=(0,V.useRef)(null);return{inputProps:{onChange:function(t){var n=t.target,r=n.validity,i=n.files;if(r.valid){var l=i?i[0]:null;l&&e(l)}},"aria-hidden":"true",ref:t,accept:e9.W9.join(","),type:"file"},buttonProps:{onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.click()}},inputRef:t}},te=function(e){var t=e7(e.onFile),n=t.inputProps,r=t.buttonProps;return(0,a.BX)(a.HY,{children:[(0,a.tZ)("input",(0,g._)((0,f._)({},n),{css:{display:"none"}})),e.children(r)]})};n(14819);var tt=n(76588);n(85805),n(15146),n(49344);var tn=n(66061);n(27187),n(52682),n(6620);var tr=n(88205);n(23855);var ti=(0,eq.iv)({position:"absolute",top:0,left:0,width:"100%",height:"100%"});function tl(e){var t=e.src,n=e.alt;return(0,a.BX)(u.G,{css:[ti,{borderBottomLeftRadius:8,borderBottomRightRadius:8,overflow:"hidden"}],children:[(0,a.tZ)(tt.Z,{objectFit:"cover",layout:"fill",src:t,alt:n}),(0,a.tZ)(u.G,{css:[ti,{background:"radial-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.6))",backgroundRepeat:"no-repeat"}]})]})}var ta=n(85195),to=[{value:i.ReplImage,text:"Photo"},{value:i.ReplFile,text:"File"}],tu=function(e){var t,n,r,l,s,p,b=e.fs,y=(0,eO.U)(),w=y("coverPage"),Z=el(),_=Z.selectedRepl,R=Z.coverFileField,x=Z.coverUrlField,S=Z.coverDefaultViewField,T=(0,v._)((t=(0,h._)(function(e){var t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:if(!(null==e?void 0:e.length)||!(t=e[0]).type.startsWith("image/"))return[2];return[4,G.uploadImage(t,tr.N.ReplCoverImage)];case 1:return n.sent(),[2]}})}),n=function(e){return t.apply(this,arguments)},l=(r=(0,v._)((0,V.useState)(!1),2))[0],s=r[1],p=(0,V.useRef)(0),[l,(0,V.useMemo)(function(){return{onDragEnter:function(e){e.preventDefault(),p.current++,s(!0)},onDragLeave:function(e){e.preventDefault(),p.current--,0===p.current&&s(!1)},onDrop:function(e){e.preventDefault(),p.current=0,s(!1),e.persist();var t,r,i=Array.from(null!==(r=null==e?void 0:null===(t=e.dataTransfer)||void 0===t?void 0:t.files)&&void 0!==r?r:[]);if(0===i.length){n(null);return}n(i)},onDragOver:function(e){e.preventDefault()}}},[n])]),2),I=T[0],U=T[1],G=(0,C.W)(x.setValue);return(0,a.BX)(u.G,(0,g._)((0,f._)({css:[d.l0.colWithGap(16)]},U),{children:[(0,a.BX)(u.G,{css:d.l0.colWithGap(12),children:[(0,a.tZ)(u.G,{css:[d.l0.rowWithGap(8)],children:(0,a.tZ)(ta.E,{tag:"fieldset",css:[d.l0.rowWithGap(24)],name:w,value:S.value,onChange:function(e){Y(e.target.value)&&S.setValue(e.target.value)},children:to.map(function(e){return(0,a.BX)(u.G,{css:[d.l0.rowWithGap(8)],children:[(0,a.tZ)(ta.Y,{id:y(e.value),value:e.value}),(0,a.tZ)("label",{htmlFor:y(e.value),children:e.text})]},e.value)})})}),S.value===i.ReplImage&&(0,a.BX)(u.G,{css:[d.l0.colWithGap(4),d.l0.align.center],children:[(0,a.tZ)(te,{onFile:function(e){return G.uploadImage(e,tr.N.ReplCoverImage)},children:function(e){var t=e.onClick;return(0,a.tZ)(ea.zx,{onClick:t,colorway:I?"primary":void 0,text:"Upload a cover photo",iconLeft:G.isLoading?(0,a.tZ)(c.Z,{}):(0,a.tZ)(tn.Z,{}),stretch:!0})}}),G.error?(0,a.tZ)(eo.E,{colorway:"negative",icon:(0,a.tZ)(eh.Z,{}),text:G.error}):null,(0,a.tZ)(o.xv,{variant:"small",color:"dimmer",children:"or drag and drop a photo here"})]}),S.value===i.ReplFile&&(0,a.BX)(u.G,{css:[d.l0.colWithGap(8)],children:[(0,a.tZ)(e8,{fs:b,initiallySelectedFile:R.value,onFileSelect:R.setValue,onClear:function(){return R.setValue("")}},null==_?void 0:_.id),(0,a.tZ)(ex,{error:R.error})]})]}),S.value===i.ReplImage&&(0,a.BX)(eY,{active:I,showPlayButton:S.value===i.ReplImage&&!!x.value&&!G.isLoading,children:[S.value===i.ReplImage&&x.value?(0,a.tZ)(tl,{src:x.value,alt:"cover"}):null,G.isLoading?(0,a.tZ)(u.G,{css:[{position:"absolute",inset:0},d.l0.align.center,d.l0.justify.center],children:(0,a.tZ)(c.Z,{color:d.TV.white,size:24})}):null]})]}))},ts=(n(58719),function(){ei("iconUrl");var e=el(),t=e.replIconInput,n=e.replIconUrl;return(0,a.BX)(u.G,{css:[d.l0.colWithGap(16),d.l0.align.center],children:[(0,a.BX)(u.G,{css:[d.l0.colWithGap(8)],children:[(0,a.BX)(u.G,{css:[d.l0.rowWithGap(8)],children:[(0,a.tZ)(te,{onFile:function(e){return t.uploadImage(e,tr.N.ReplIcon)},css:d.l0.backgroundColor.accentNegativeDefault,children:function(e){var t=e.onClick;return(0,a.tZ)(ea.zx,{onClick:t,text:"Upload image",iconLeft:(0,a.tZ)(tn.Z,{}),css:[d.l0.backgroundColor.backgroundHigher],type:"button",stretch:!0})}}),null]}),t.error?(0,a.tZ)(u.G,{children:(0,a.tZ)(eo.E,{icon:(0,a.tZ)(eh.Z,{}),colorway:"negative",text:t.error,closable:!0,closeAction:t.clearError})}):null]}),(0,a.tZ)(eG.LN,{alt:"icon",size:84,iconUrl:n,isLoading:!!t.previewUrl,css:[d.l0.backgroundColor.backgroundHigher]})]})}),tc=n(70002),td=n(60769),tp=n(44620),th=function(){var e=ei("isTemplate"),t=(0,eO.U)()("templateCheckbox");return(0,a.BX)(u.G,{css:[d.l0.colWithGap(8)],children:[(0,a.BX)(u.G,{css:[d.l0.colWithGap(8)],children:[(0,a.BX)(u.G,{css:[d.l0.rowWithGap(8)],children:[(0,a.tZ)(td.X,{id:t,checked:e.value,onChange:function(t){return e.setValue(t.target.checked)}}),(0,a.tZ)("label",{htmlFor:t,children:"Publish as Template"})]}),(0,a.tZ)(ex,{error:e.error})]}),(0,a.tZ)(o.xv,{variant:"small",color:"dimmer",children:"This is a good option for Repls meant as starting points for future work."}),(0,a.tZ)(u.G,{css:[d.l0.align.start],children:(0,a.tZ)(tc.Z,{href:"https://docs.replit.com/programming-ide/how-to-make-a-replit-template",target:"_blank",text:"What makes a good Template?",iconRight:(0,a.tZ)(tp.Z,{}),variant:"outlined",size:"small"})}),(0,a.tZ)(u.G,{css:[d.l0.pt(16)],children:(0,a.BX)(o.xv,{children:["Please make sure your Repl abides by the"," ",(0,a.tZ)("a",{href:"https://blog.replit.com/community-standards",target:"_blank",children:"Replit community rules and guidelines"})," ","before publishing."]})})]})},tf=n(63257),tg=n(64157),tv=n(39082),tm=u.K.ul,tb=u.K.li;function ty(e){var t=e.children;return(0,a.tZ)(u.G,{css:[d.l0.px(8),d.l0.pt(8)],children:(0,a.tZ)(o.xv,{multiline:!1,css:[{textTransform:"uppercase"}],variant:"small",color:"dimmer",children:t})})}function tw(e){var t=e.highlighted,n=e.tag;return(0,a.tZ)(u.G,{css:[d.l0.rowWithGap(8),d.l0.p(8),t&&{backgroundColor:em.gU.listItem["@media (hover: hover)"][":not([disabled])"][":not(textarea):active"].backgroundColor},{cursor:"pointer"}],children:(0,a.BX)(u.G,{css:[d.l0.flex.growAndShrink(1),d.l0.rowWithGap(4),d.l0.align.center],children:[(0,a.tZ)(o.xv,{multiline:!1,children:n.id}),n.isOfficial?(0,a.tZ)(tv.Z,{}):null]})})}var tZ=V.memo(function(e){var t=e.getItemProps,n=e.highlightedIndex,r=e.data;return(0,a.tZ)(eS.Z,{css:[d.l0.minWidth(200)],children:r.sections.reduce(function(e,r){return e.sections.push((0,a.BX)(tb,{children:[(0,a.tZ)(ty,{children:r.title}),(0,a.tZ)(tm,{css:[d.l0.pt(4),d.l0.pb(8)],children:r.tags.map(function(r){var i=e.itemIndex++;return(0,a.tZ)(tb,(0,g._)((0,f._)({},t({item:r,index:i})),{children:(0,a.tZ)(tw,{tag:r,highlighted:n===i})}),r.id)})})]},r.title)),e},{sections:[],itemIndex:0}).sections})});tZ.displayName="TagsMenu";var t_=n(35273);function tR(){var e=(0,P._)(["\n  fragment TagsComboboxTag on Tag {\n    id\n    isOfficial\n  }\n"]);return tR=function(){return e},e}function tx(){var e=(0,P._)(["\n  query TagsCombobox($limit: Int, $search: String) {\n    tagGroups {\n      official(limit: $limit, search: $search) {\n        id\n        ...TagsComboboxTag\n      }\n      community(limit: $limit, search: $search) {\n        id\n        ...TagsComboboxTag\n      }\n    }\n  }\n  ","\n"]);return tx=function(){return e},e}var tC={},tS=(0,E.Ps)(tR()),tT=(0,E.Ps)(tx(),tS),tI=/^[0-9a-zA-Z]+$/,tV=function(e){return e.id},tU=n(99656),tG=u.K.div,tP=u.K.input,tE=(0,eq.iv)([d.l0.fontSize(12),d.l0.pl(24),d.l0.pr(8),d.l0.py(4)]);function tF(){return(0,a.tZ)(o.xv,{multiline:!1,css:[d.l0.px(4),d.l0.flex.row,d.l0.align.center,d.l0.position.absolute,d.l0.height("100%"),d.l0.color.foregroundDefault,{top:0,left:4,pointerEvents:"none"}],children:(0,a.tZ)(tU.Z,{size:12})})}function tk(e){var t=e.text,n=e.children;return(0,a.BX)(eu.Tg,{elevated:!0,css:[d.l0.position.relative,d.l0.minWidth(30),d.l0.borderRadius(16),{border:"1px solid transparent","&:focus-within":{borderColor:d.TV.outlineDimmer,backgroundColor:"transparent"}}],children:[(0,a.tZ)(tF,{}),(0,a.tZ)(o.xv,{css:[{visibility:"hidden"},tE],multiline:!1,children:t}),n]})}function tD(e){var t,n,r,i,l,o,s,c,p,h,m,y,w,Z,_,R,x,C,S,T,I=(t=e.onRemove,n=e.onSelect,r=e.filter,i=e.inputValue,l=e.setInputValue,o=(0,eI.Z)(i,100),s=(0,b.Z)(n),C=(p=(c={search:o,filter:void 0===r?function(){return!0}:r}).search,h=c.filter,y=(m=(0,f._)({},tC,{variables:{limit:p?10:3,search:p}}),F.a(tT,m)).data,Z=(w=(0,v._)((0,V.useState)({official:[],community:[],newTag:[]}),2))[0],_=w[1],R=(0,V.useMemo)(function(){if(y){var e=[],t=[],n=new Set,r=!0,i=!1,l=void 0;try{for(var a,o=y.tagGroups.official[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var u=a.value;n.add(u.id.toLowerCase()),h(u)&&e.push(u)}}catch(e){i=!0,l=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw l}}var s=!0,c=!1,d=void 0;try{for(var f,g=y.tagGroups.community[Symbol.iterator]();!(s=(f=g.next()).done);s=!0){var v=f.value;n.add(v.id.toLowerCase()),h(v)&&t.push(v)}}catch(e){c=!0,d=e}finally{try{s||null==g.return||g.return()}finally{if(c)throw d}}var m=t.find(function(e){return e.id===p}),b=!p||m||n.has(p.toLowerCase())?void 0:{id:p,isOfficial:!1};return{official:e,community:t,newTag:b&&h(b)?[b]:[]}}},[y,h,p]),(0,V.useEffect)(function(){if(R){var e=R.official,t=R.community,n=R.newTag;_(function(r){return{official:(0,eV.Z)(e,{existing:r.official,getKey:tV}),community:(0,eV.Z)(t,{existing:r.community,getKey:tV}),newTag:n}})}},[R]),x={tagGroups:Z,reset:function(){_({official:[],community:[],newTag:[]})}}).tagGroups,S=x.reset,T=(0,ej.Kb)({inputValue:i,items:(0,tf._)(C.official).concat((0,tf._)(C.community),(0,tf._)(C.newTag)),defaultHighlightedIndex:0,itemToString:function(e){return e?e.id:""},onSelectedItemChange:function(e){e.selectedItem&&(S(),l(""),T.reset(),T.openMenu())}}),(0,t_.Z)(function(){T.selectedItem&&s.current(T.selectedItem)},[T.selectedItem]),{tagGroups:C,combobox:T,onChange:function(e){var t=e.currentTarget.value;(!t||tI.test(t))&&!(t.length>30)&&l(t)},onKeyDown:function(e){""===i&&"Backspace"===e.key&&(e.preventDefault(),t())}}),U=I.combobox,G=I.tagGroups,P=I.onChange,E=I.onKeyDown,k=(0,V.useMemo)(function(){var e;return e=[],(G.official.length&&e.push({title:"Official Tags",tags:G.official}),G.community.length&&e.push({title:"Community Tags",tags:G.community}),G.newTag.length&&e.push({title:"Create new tag",tags:G.newTag}),0===e.length)?null:{type:"sections",sections:e}},[G]),D="Add tag";return(0,a.BX)(u.G,{children:[(0,a.tZ)(tG,(0,g._)((0,f._)({},U.getComboboxProps()),{css:[d.l0.flex.row],children:(0,a.tZ)(tk,{text:U.inputValue||D,children:(0,a.tZ)(tP,(0,f._)({css:[d.l0.coverContainer,tE,d.l0.color.foregroundDefault,{backgroundColor:"transparent","&::placeholder":d.l0.color.foregroundDefault,"&:focus::placeholder":d.l0.color.foregroundDimmest}]},U.getInputProps({placeholder:D,onChange:P,onKeyDown:E,onFocus:function(){U.openMenu()}})))})})),(0,a.tZ)(tG,(0,g._)((0,f._)({},U.getMenuProps()),{css:[d.l0.position.relative],children:k&&U.isOpen?(0,a.tZ)(tZ,{getItemProps:U.getItemProps,highlightedIndex:U.highlightedIndex,data:k}):null}))]})}function tB(e){var t=e.tags,n=e.max,r=e.onAdd,i=e.onRemove,l=t.map(function(e){return e.id}),o=(0,v._)((0,V.useState)(""),2),s=o[0],c=o[1];return(0,a.BX)(u.G,{css:[d.l0.flex.row,d.l0.flex.wrap,{margin:"calc(-1 * ".concat(d.TV.space4,")")}],children:[t.map(function(e,t){return(0,a.tZ)(u.G,{css:[d.l0.m(4)],children:(0,a.tZ)(tg.g,{small:!0,tag:e,onClick:function(){return i(t)}})},e.id)}),t.length<(void 0===n?5:n)?(0,a.tZ)(u.G,{css:[d.l0.m(4)],children:(0,a.tZ)(tD,{onSelect:r,filter:function(e){return!l.includes(e.id.toLowerCase())},inputValue:s,setInputValue:c,onRemove:function(){var e=t.length-1;e>=0&&(c(t[e].id),i(e))}})}):null]})}var tW=function(){var e=ei("tags");return(0,a.BX)(u.G,{css:[d.l0.colWithGap(8)],children:[(0,a.tZ)(u.G,{css:[d.l0.colWithGap(4)],children:(0,a.tZ)(tB,{max:5,tags:e.value,onAdd:function(t){return e.setValue((0,tf._)(e.value).concat([t]))},onRemove:function(t){return e.setValue((0,tf._)(e.value.slice(0,t)).concat((0,tf._)(e.value.slice(t+1))))}})}),(0,a.BX)(u.G,{css:d.l0.rowWithGap(4),children:[(0,a.tZ)(o.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Adding tags helps others find your Repl."}),(0,a.BX)(o.xv,{color:"dimmest",variant:"small",multiline:!1,children:[e.value.length,"/",5]})]})]})},tX=n(47001),tN=n(84800),tL=n(30173),tM=n(33829),tz=n(44161),tA=n(63009),tO=n(4004),tj=u.K.form,tK=function(e){var t=e.user,n=el(),r=n.selectedRepl,i=n.replTitleField,s=n.replDescriptionField,p=n.replIconUrl,h=n.tagsField,v=n.isTemplateField;return(0,a.BX)(eu.Tg,{background:"root",css:[(0,l._)({},(0,ef.et)("tabletMin"),{display:"flex"}),d.l0.flex.growAndShrink(1),d.l0.p(16),d.l0.colWithGap(12),d.l0.align.center,d.l0.display.none],children:[(0,a.tZ)(o.xv,{multiline:!1,variant:"small",color:"dimmer",css:[d.l0.width("100%"),{fontWeight:d.TV.fontWeightMedium}],children:"Preview"}),(0,a.BX)(u.G,{css:[d.l0.width("100%"),d.l0.maxWidth(432),d.l0.position.relative],children:[(0,a.tZ)(u.G,{css:{position:"absolute",zIndex:2,inset:0,boxShadow:"inset 0 48px 24px -24px "+d.TV.backgroundRoot+", inset 0 -48px 24px -24px "+d.TV.backgroundRoot}}),(0,a.BX)(u.G,{css:[d.l0.height(416),d.l0.colWithGap(24),d.l0.justify.center,d.l0.overflow("hidden"),d.l0.backgroundColor.backgroundRoot],children:[(0,a.tZ)(e_.O,{}),r&&p?(0,a.tZ)(e_.Z,{post:{user:t,repl:(0,g._)((0,f._)({},r),{title:i.value,iconUrl:p,tags:h.value,description:s.value,isTemplate:v.value})}}):(0,a.tZ)(u.G,{css:[d.l0.flex.grow(1),d.l0.align.center,d.l0.justify.center],children:(0,a.tZ)(c.Z,{})}),(0,a.tZ)(e_.O,{})]})]})]})},tH=["Basics","Tags","Icon","Cover page","Publishing"];function tJ(e){var t,n,r,s,p,g,w,Z,_,R,S,P,E,k,X,z,K,ei,el,em,eb,ey,e_,ex=e.replId,eC=e.currentUser,eS=e.source,eT=function(e){var t,n,r,i,l,a,o,u,s=(0,x.Y)(e.replId||null,function(e){return e?null:{message:"Select a Repl to share"}}),c=(t={variables:{id:s.value||""},skip:!s.value},n=(0,f._)({},D,t),F.a(B,n)),d=(null===(r=c.data)||void 0===r?void 0:r.repl.__typename)==="Repl"?c.data.repl:null,p=!!(null==d?void 0:d.publishedAs),g=(0,x.Y)("",et),w=(0,x.Y)("",en),Z=(0,x.Y)(null,function(){return null}),_=(0,x.Y)("repl_image",function(){return null}),R=(0,x.Y)(null,function(){return null}),S=(0,x.Y)("",e.fileValidator),P=(0,x.Y)([],function(){return null}),E=(0,b.Z)(d),k=(0,x.Y)(!1,function(e){var t=E.current;return e&&(null==t?void 0:t.lastPublishedAt)?{message:"This Repl has already been published. Please unpublish before publishing as a Template."}:e||(null==t?void 0:t.publishedAs)!==I.O2.Template?void 0:{message:"This Repl has already been published as a Template. Please unpublish before publishing as a Repl."}}),X=function(){var e,t=(0,v._)((e=(0,f._)({},A,void 0),W.D(O,e)),2),n=t[0],r=t[1];function i(){return(i=(0,h._)(function(e){var t;return(0,m.Jh)(this,function(i){switch(i.label){case 0:if(r.loading)return[2,{data:null,error:null}];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n({variables:{input:e}})];case 2:return[2,{data:(t=i.sent()).data,error:j(t)}];case 3:return i.sent(),[2,{data:null,error:"Something went wrong saving your Cover page"}];case 4:return[2]}})})).apply(this,arguments)}return{data:r.data,loading:r.loading,error:j(r),setReplViewSettings:function(e){return i.apply(this,arguments)}}}(),z=function(){var e,t=(0,v._)((e=(0,f._)({},N,void 0),W.D(L,e)),2),n=t[0],r=t[1];function i(){return(i=(0,h._)(function(e){var t;return(0,m.Jh)(this,function(i){switch(i.label){case 0:if(r.loading)return[2,{data:null,error:null}];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n({variables:{input:e}})];case 2:return[2,{data:(t=i.sent()).data,error:M(t)}];case 3:return i.sent(),[2,{data:null,error:"Something went wrong saving your Repl Tags"}];case 4:return[2]}})})).apply(this,arguments)}return{data:r.data,loading:r.loading,error:M(r),setReplTags:function(e){return i.apply(this,arguments)}}}(),K=function(){var e,t=(0,v._)((e=(0,f._)({},H,void 0),W.D(J,e)),2),n=t[0],r=t[1];function i(){return(i=(0,h._)(function(e){return(0,m.Jh)(this,function(t){switch(t.label){case 0:if(r.loading)return[2,{data:null,error:null}];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,n({variables:{input:e}})];case 2:return[2,{data:t.sent().data,error:null}];case 3:return[2,{data:null,error:$(t.sent())}];case 4:return[2]}})})).apply(this,arguments)}return{data:r.data,loading:r.loading,error:r.error&&$(r.error),updateRepl:function(e){return i.apply(this,arguments)}}}(),er=(0,G.O)(),ei=(0,U.r)(),el=(null==d?void 0:null===(i=d.replViewSettings)||void 0===i?void 0:i.defaultView)&&Y(d.replViewSettings.defaultView)?d.replViewSettings.defaultView:"repl_image",ea=(0,b.Z)(g.setValue),eo=(0,b.Z)(w.setValue),eu=(0,b.Z)(P.setValue),es=(0,b.Z)(Z.setValue),ec=(0,b.Z)(R.setValue),ed=(0,b.Z)(_.setValue),ep=(0,b.Z)(S.setValue),eh=(0,b.Z)(k.setValue);(0,V.useEffect)(function(){var e,t,n,r;d&&(eh.current("Template"===d.publishedAs),ed.current(el),ep.current(null!==(t=null===(e=d.replViewSettings)||void 0===e?void 0:e.replFile)&&void 0!==t?t:""),ea.current(d.isRenamed?d.title:"",{preventTouch:!0}),eo.current(null!==(n=d.description)&&void 0!==n?n:"",{preventTouch:!0}),eu.current(d.tags),es.current(d.iconUrl.endsWith(".svg")?null:d.iconUrl),ec.current(null!==(r=d.imageUrl)&&void 0!==r?r:null))},[d,ec,es,eu,ea,eo,el,ed,ep,eh]);var ef=(0,C.W)(Z.setValue),eg=ef.previewUrl||Z.value||(null==d?void 0:d.iconUrl)||(null==d?void 0:d.templateInfo.iconUrl),ev=null!==(u=null===(o=[s,g,w,Z,_,R,P,S,k].filter(function(e){return(e!==S||"repl_file"===_.value)&&e.error}))||void 0===o?void 0:null===(a=o[0])||void 0===a?void 0:null===(l=a.error)||void 0===l?void 0:l.message)&&void 0!==u?u:null;function em(){return(em=(0,h._)(function(){var e,t,n,r,i,l,a,o,u,s,c;return(0,m.Jh)(this,function(p){switch(p.label){case 0:if(!d)throw new q("Missing repl");if(t=d.title!==g.value,n=d.description!==w.value,r=d.iconUrl!==Z.value,i="repl_image"===_.value&&d.imageUrl!==R.value,l=S.value&&"repl_file"===_.value&&(null===(e=d.replViewSettings)||void 0===e?void 0:e.replFile)!==S.value,a=_.value&&el!==_.value,o=!T()(d.tags,P.value),!(t||n||r))return[3,2];if(g.error||w.error||Z.error)throw new q;return[4,K.updateRepl({id:d.id,title:t?g.value:void 0,description:n?w.value:void 0,iconUrl:r?Z.value:void 0})];case 1:if((u=p.sent()).error)throw new Q(u.error);p.label=2;case 2:if(!(a||i||l))return[3,4];if("repl_image"===_.value&&R.error||"repl_file"===_.value&&S.error)throw new q;return[4,X.setReplViewSettings({replId:d.id,defaultView:"repl_image"===_.value?I.bV.ReplImage:I.bV.ReplFile,replImage:i?R.value:void 0,replFile:l?S.value:void 0})];case 3:if((s=p.sent()).error)throw new Q(s.error);p.label=4;case 4:if(!o)return[3,6];if(P.error)throw new q;return[4,z.setReplTags({replId:d.id,tags:P.value.map(function(e){return e.id})})];case 5:if((c=p.sent()).error)throw new Q(c.error);p.label=6;case 6:return[2]}})})).apply(this,arguments)}function eb(){return(eb=(0,h._)(function(){var t,n;return(0,m.Jh)(this,function(r){switch(r.label){case 0:if(!d)throw new q("Missing repl");if(ev)throw new q(null!=ev?ev:"Something went wrong");if(!k.value)return[3,2];return[4,ei.createDeployment({input:{replId:d.id,description:w.value,iconUrl:eg||d.iconUrl}})];case 1:if((t=r.sent()).error)throw new ee(t.error);return(0,y.j)(y.U3.POST_MADE,{source:e.source,replType:"template_repl",title:g.value,description:w.value,tags:P.value.map(function(e){return e.id}),defaultView:_.value}),[2];case 2:return[4,er.publish({input:{replId:d.id}})];case 3:if((n=r.sent()).error)throw new ee(n.error);return(0,y.j)(y.U3.POST_MADE,{source:e.source,replType:"regular_repl",title:g.value,description:w.value,tags:P.value.map(function(e){return e.id}),defaultView:_.value}),[2]}})})).apply(this,arguments)}var ey=K.loading||X.loading||z.loading,ew=K.error||X.error||z.error,eZ=er.loading||ei.loading,e_=er.error||ei.error;return{selectedRepl:d,isReplLoading:c.loading,replLoadingError:c.error,replIdField:s,replTitleField:g,replDescriptionField:w,iconUrlField:Z,coverDefaultViewField:_,coverUrlField:R,coverFileField:S,tagsField:P,isTemplateField:k,replIconInput:ef,replIconUrl:eg,inputError:ev,save:function(){return em.apply(this,arguments)},isSaving:ey,savingError:ew,publish:function(){return eb.apply(this,arguments)},isPublishing:eZ,publishingError:e_,isPublished:p}}({replId:ex,fileValidator:(t=(0,h._)(function(e){var t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:if(!eH)return[2,{message:"Could not get file"}];if(!e)return[2,{message:"File path cannot be blank"}];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,eH.stat(e)];case 2:if(!(t=n.sent()).exists||t.type!==ev.Tv.File)return[2,{message:"File does not exist"}];return[3,4];case 3:return n.sent(),[2,{message:"Could not get file"}];case 4:return[2]}})}),function(e){return t.apply(this,arguments)}),source:eS}),eI=eT.selectedRepl,eV=eT.isReplLoading,eU=eT.replLoadingError,eG=eT.replIdField,eP=eT.replTitleField,eE=eT.replDescriptionField,eF=eT.iconUrlField,ek=eT.tagsField,eD=eT.coverDefaultViewField,eB=eT.coverUrlField,eW=eT.coverFileField,eX=eT.isTemplateField,eN=eT.save,eL=eT.isSaving,eM=eT.savingError,ez=eT.publish,eA=eT.isPublishing,eO=eT.publishingError,ej=eT.isPublished,eK=(r=(n={repl:eI,currentUser:eC}).repl,s=n.currentUser,g=(p=(0,v._)((0,tA.qg)(),2))[0],w=p[1],Z=(0,tA.ic)(),R=(_=(0,v._)((0,V.useState)(function(){var e,t,n;return e=(0,tX.ZP)({onUnrecoverableError:(0,tz.Z)({throwBsod:w,origin:"Publish: services/onUnrecoverableError"})}),t=(0,tM.Z)({container:e}),n=(0,tO.Z)({container:e,fs:t}),{container:e,fs:t,dotReplit:n}}),1)[0]).container,S=_.fs,P=_.dotReplit,k=(E=(0,v._)((0,V.useState)(function(){return R.getConnectionState()===tX.em.CONNECTED}),2))[0],X=E[1],z=(0,tN.b)(r?{repl:r,currentUser:s}:null),K=(0,tL.S)(),(0,V.useEffect)(function(){if(r&&z&&R.getConnectionState()===tX.em.DISCONNECTED)return R.connect({context:z,getMinimumRetryDelayMs:K}),function(){return R.close()}},[r,R,z]),(0,V.useEffect)(function(){return R.onConnectionStateChanged(function(e){X(e===tX.em.CONNECTED)})},[R]),{isConnected:k,container:R,fs:S,dotReplit:P,bsodId:null==g?void 0:g.eventId,devClearBsod:function(){return Z()}}),eH=eK.fs,eJ=eK.dotReplit,eY=eK.bsodId,eq=(0,v._)((0,V.useState)(0),2),eQ=eq[0],e0=eq[1],e1=tH[eQ],e2=eQ===tH.length-1,e4=(0,v._)((0,V.useState)({show:!1,isUpdate:!1}),2),e3=e4[0],e5=e4[1],e6=(0,v._)((0,V.useState)(function(){return Array(tH.length).fill(!1)}),2),e8=e6[0],e9=e6[1],e7=(0,V.useCallback)(function(e,t){e8[e]=t,e9(e8)},[e8]);(0,V.useEffect)(function(){eT.replTitleField.value&&eT.replDescriptionField.value?e7(0,!0):e7(0,!1),eT.tagsField.value.length>0?e7(1,!0):e7(1,!1),eT.iconUrlField.value?e7(2,!0):e7(2,!1),eT.coverDefaultViewField.value===i.ReplImage&&eT.coverUrlField.value||eT.coverDefaultViewField.value===i.ReplFile&&eT.coverFileField.value?e7(3,!0):e7(3,!1)},[e8,eT,e7]);var te=(el=(ei=(0,v._)((0,V.useState)({isLoading:!0,error:null,entryPoint:null}),2))[0],em=ei[1],(0,V.useEffect)(function(){function e(){return(e=(0,h._)(function(){var e,t,n;return(0,m.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,eJ.getConfig()];case 1:if((t=r.sent()).error)throw Error(t.errorMessage);return em({isLoading:!1,error:null,entryPoint:null!==(n=null==t?void 0:null===(e=t.config)||void 0===e?void 0:e.entrypoint)&&void 0!==n?n:null}),[3,3];case 2:return r.sent(),em({isLoading:!1,error:"Could not load .replit config",entryPoint:null}),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[eJ]),(0,f._)({},el));(0,V.useEffect)(function(){te.isLoading||!te.entryPoint||eW.value||eW.setValue(te.entryPoint)},[te.isLoading,te.entryPoint,eW]);var tt=(0,v._)((0,V.useState)(!1),2),tn=tt[0],tr=tt[1];(0,V.useEffect)(function(){tn||ex&&(eV||ej)||(tr(!0),(0,y.j)(y.U3.PUBLISH_SELECTED,{source:eS}))},[tn,eS,ex,eV,ej]);var ti=(0,b.Z)(!!((null==eI?void 0:eI.publishedAs)||(null==eI?void 0:eI.lastPublishedAt))),tl=(0,b.Z)(e1);if((0,V.useEffect)(function(){return function(){ti.current||(0,y.j)(y.U3.PUBLISH_FLOW_EXITED,{source:eS,lastSectionVisited:tl.current})}},[eS,ti,tl]),eY)return(0,a.tZ)(eg.Z,{});if(e3.show&&eI)return(0,a.tZ)(eR.q,{repl:eI,isUpdate:e3.isUpdate});var ta={Basics:{hasError:!!(eG.error||eP.error||eE.error),isValid:(0,h._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return[4,Promise.all([eG.validate(),eP.validate(),eE.validate()])];case 1:return[2,e.sent().every(function(e){return!e})]}})})},Tags:{hasError:!!ek.error,isValid:(0,h._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return[4,ek.validate()];case 1:return[2,!e.sent()]}})})},Icon:{hasError:!!eF.error,isValid:(0,h._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return[4,eF.validate()];case 1:return[2,!e.sent()]}})})},"Cover page":{hasError:!!(eD.value===i.ReplImage?eB.error:eW.error),isValid:(0,h._)(function(){var e;return(0,m.Jh)(this,function(t){switch(t.label){case 0:if(eD.value!==i.ReplImage)return[3,2];return[4,eB.validate()];case 1:return e=!t.sent(),[3,4];case 2:return[4,eW.validate()];case 3:e=!t.sent(),t.label=4;case 4:return[2,e]}})})},Publishing:{hasError:!!eX.error,isValid:(0,h._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return[4,eX.validate()];case 1:return[2,!e.sent()]}})})}},to=ta[e1].hasError,tc=ta[e1].isValid,td=null!==(e_=tH.find(function(e){return ta[e].hasError}))&&void 0!==e_?e_:null,tp=null;eI?eU||eM||eO?tp="Something went wrong - please try again":to&&(tp="Please fill out the the form"):tp="Please select a Repl";var tf=!!(!eI||to||eU||eV||eL||eA),tg=!!eX.value,tv=(eb=(0,h._)(function(e){var t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:if(t=tf)return[3,2];return[4,tc()];case 1:t=!n.sent(),n.label=2;case 2:if(t)return[2];n.label=3;case 3:return n.trys.push([3,5,,6]),e0(e),[4,eN()];case 4:return n.sent(),[3,6];case 5:return n.sent(),[2];case 6:return[2]}})}),function(e){return eb.apply(this,arguments)}),tm=eQ>0;return(0,a.tZ)(er.Provider,{value:eT,children:(0,a.BX)(eu.Tg,{css:[d.l0.borderRadius(8),d.l0.flex.row,d.l0.overflow("hidden"),(0,l._)({},(0,ef.et)("tabletMax"),{minWidth:850})],background:"default",dataCy:"publish-form-container",children:[(0,a.BX)(u.G,{css:[d.l0.colWithGap(12),d.l0.p(16),d.l0.minWidth(320),d.l0.flex.growAndShrink(1),(0,l._)({},(0,ef.et)("tabletMin"),{maxWidth:320})],children:[(0,a.tZ)(o.xv,{variant:"subheadBig",multiline:!1,children:ej?"Edit Publish Settings":"Publish ".concat(ex?"this":"a"," Repl")}),(0,a.BX)(tj,{onSubmit:(ey=(0,h._)(function(e){var t,n,r,i,l,a;return(0,m.Jh)(this,function(o){switch(o.label){case 0:if(e.preventDefault(),!e2)return[3,13];t=!0,n=!1,r=void 0,o.label=1;case 1:o.trys.push([1,6,7,8]),i=tH[Symbol.iterator](),o.label=2;case 2:if(t=(l=i.next()).done)return[3,5];return[4,ta[l.value].isValid()];case 3:if(!o.sent())return[2];o.label=4;case 4:return t=!0,[3,2];case 5:return[3,8];case 6:return a=o.sent(),n=!0,r=a,[3,8];case 7:try{t||null==i.return||i.return()}finally{if(n)throw r}return[7];case 8:if(ej)return[3,10];return[4,ez()];case 9:return o.sent(),e5({show:!0,isUpdate:!1}),[3,12];case 10:return[4,eN()];case 11:o.sent(),e5({show:!0,isUpdate:!0}),o.label=12;case 12:return[3,14];case 13:tv(eQ+1),o.label=14;case 14:return[2]}})}),function(e){return ey.apply(this,arguments)}),css:[d.l0.colWithGap(16),d.l0.flex.growAndShrink(1)],children:[(0,a.tZ)(u.G,{css:[d.l0.rowWithGap(4),d.l0.align.center],children:tH.map(function(e,t){return(0,a.BX)(V.Fragment,{children:[0!==t&&(0,a.tZ)(ew,{}),(0,a.tZ)(eZ,{isActive:eQ===t,isComplete:e8[t],onClick:function(){return tv(t)},disabled:tf,children:e})]},e)})}),(0,a.BX)(u.G,{css:d.l0.flex.growAndShrink(1),children:["Basics"===e1&&(0,a.tZ)(e$,{}),"Tags"===e1&&(0,a.tZ)(tW,{}),"Icon"===e1&&(0,a.tZ)(ts,{}),"Cover page"===e1&&(0,a.tZ)(tu,{fs:eH}),"Publishing"===e1&&(0,a.tZ)(th,{})]}),(0,a.BX)(u.G,{children:[e2&&td&&td!==e1?(0,a.tZ)(eo.E,{colorway:"negative",icon:(0,a.tZ)(eh.Z,{}),text:"Please fix error in ".concat(td," section")}):null,eM?(0,a.tZ)(eo.E,{colorway:"negative",icon:(0,a.tZ)(eh.Z,{}),text:eM}):null,eO?(0,a.tZ)(eo.E,{colorway:"negative",icon:(0,a.tZ)(eh.Z,{}),text:eO}):null]}),(0,a.BX)(u.G,{css:[d.l0.rowWithGap(8),d.l0.align.center,tm?d.l0.justify.spaceBetween:d.l0.justify.end],children:[tm?(0,a.tZ)(ea.zx,{type:"button",iconLeft:(0,a.tZ)(ec.Z,{}),disabled:tf,onClick:function(){return tv(eQ-1)},text:"Back"}):null,eL?(0,a.tZ)(u.G,{css:[d.l0.rowWithGap(4),d.l0.color.foregroundDimmer],children:(0,a.tZ)(c.Z,{})}):null,(0,a.BX)(es.u,{tooltip:tp,placement:"bottom",isDisabled:!tp,children:[!e2&&(0,a.tZ)(ea.zx,{type:"submit",colorway:"primary",iconLeft:(0,a.tZ)(ed.Z,{}),disabled:tf,text:"Next",dataCy:"publish-form-next-button"}),e2&&!ej?(0,a.tZ)(ea.zx,{type:"submit",colorway:"primary",css:[{boxShadow:"0px 0px 16px 0px ".concat(d.TV.accentPrimaryDimmer," !important")}],iconLeft:(0,a.tZ)(ep.Z,{}),disabled:!!(tf||td),text:eA?tg?"Submitting...":"Publishing...":tg?"Submit Template":"Publish to Community",dataCy:"publish-form-publish-button"}):null,e2&&ej?(0,a.tZ)(ea.zx,{type:"submit",colorway:"primary",iconLeft:(0,a.tZ)(ep.Z,{}),disabled:!!(tf||td),text:eL?"Saving...":"Save"}):null]})]})]})]}),(0,a.tZ)(tK,{user:eC})]})})}function t$(e){var t,n,r=e.replId,i=e.source,h=(0,p.NH)(),f=(null===(n=h.data)||void 0===n?void 0:null===(t=n.currentUser)||void 0===t?void 0:t.__typename)==="CurrentUser"?h.data.currentUser:null;return h.loading?(0,a.tZ)(u.G,{css:[d.l0.center,d.l0.p(32),d.l0.width(512),(0,l._)({},"@media (max-width: ".concat(s.j.tabletMin,"px)"),[{width:"100%"}])],children:(0,a.tZ)(c.Z,{})}):h.error||!f?(0,a.tZ)(u.G,{css:[d.l0.center,d.l0.p(32)],children:(0,a.tZ)(o.xv,{multiline:!1,children:"Something went wrong, please try again."})}):(0,a.tZ)(tJ,{source:i,replId:r,currentUser:f})}},48459:function(e,t,n){n.d(t,{q:function(){return T}});var r=n(42516),i=n(41733),l=n(30509),a=n(66626),o=n(74985),u=n(25770),s=n(10041),c=n(54085),d=n(70002),p=n(15146),h=n(38080),f=n(74833),g=n(30983),v=n(56596),m=n(29479),b=n(12874),y=n(41859),w=n(90409),Z=n(29287),_=n(75582),R=n(33988),x=n.n(R),C=n(50959),S=function(e){var t=e.url,n=e.successMessageDurationMs,r=void 0===n?1500:n,i=(0,a._)((0,C.useState)(!1),2),l=i[0],u=i[1],c=(0,C.useRef)(null),d=function(){u(!0),c.current=setTimeout(function(){u(!1)},r)};return(0,C.useEffect)(function(){return function(){c.current&&clearTimeout(c.current)}},[]),(0,o.tZ)(g.u,{isOpen:l,placement:"bottom",tooltip:l?"Copied!":"Copy link",delay:"none",children:(0,o.tZ)(p.hU,{alt:"Copy link",tooltipHidden:!1,onClick:function(){t&&((0,s.Z)(t),d())},children:(0,o.tZ)(y.Z,{})})})},T=function(e){var t=e.repl,n=e.isUpdate,a=(0,u.j3)(t),s=t.url?(0,u.QB)(t):"",p=t.publishedAs===_.O2.Template,g=(0,c.Z)({text:"Check out what I just published on Replit: ".concat(t.title),url:s});return(0,o.BX)(h.Tg,{background:"default",css:[Z.l0.borderRadius(8),Z.l0.overflow("hidden"),Z.l0.colWithGap(16),Z.l0.width(510),Z.l0.p(16),Z.l0.flex.growAndShrink(1),(0,r._)({},"@media (max-width: ".concat(m.j.tabletMin,"px)"),[{width:"100%"}])],dataCy:"published-repl-share-info-container",children:[(0,o.BX)(v.G,{css:[Z.l0.colWithGap(16)],children:[(0,o.BX)(f.xv,{variant:"subheadBig",multiline:!1,children:[p?"Template":"Repl"," ",n?"updated":"published","!"]})," ",(0,o.BX)(v.G,{css:[Z.l0.colWithGap(4)],children:[(0,o.tZ)(f.xv,{variant:"small",css:[Z.l0.color.foregroundDimmer],multiline:!1,children:"Cover page link"}),(0,o.BX)(v.G,{css:[Z.l0.rowWithGap(4),Z.l0.align.center],children:[(0,o.tZ)(x(),(0,l._)((0,i._)({legacyBehavior:!0},a),{css:[Z.l0.flex.growAndShrink(1)],children:(0,o.tZ)("a",{css:[{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}],children:s})})),(0,o.tZ)(S,{url:s})]})]})]}),(0,o.BX)(v.G,{css:[Z.l0.rowWithGap(12),Z.l0.justify.end,(0,r._)({alignItems:"flex-end"},Z.BC.max("mobileMax"),[Z.l0.colWithGap(8),{width:"100%",">*":{width:"100%"}}])],children:[(0,o.tZ)(d.Z,{prefetch:!1,href:g,iconLeft:(0,o.tZ)(w.Z,{}),text:"Share to Twitter",target:"_blank",css:[(0,r._)({},Z.BC.max("mobileMax"),[Z.l0.mr(0)])]}),(0,o.tZ)(d.Z,{iconRight:(0,o.tZ)(b.Z,{}),text:p?"Go to Templates":"Go to Community",href:p?{pathname:"/templates/templates"}:{pathname:"/postsFeed",query:{order:"new"}},as:p?"/templates":"/community/all"})]})]})}},66555:function(e,t,n){n.d(t,{r:function(){return b}});var r=n(27387),i=n(66626),l=n(96583),a=n(41733),o=n(21262),u=n(71440),s=n(32147),c=n(99165);function d(){var e=(0,o._)(["\n  mutation CreateTemplateReleaseCreateDeployment(\n    $input: CreateReplDeployemntInput!\n  ) {\n    createReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,o._)(["\n  mutation CreateTemplateReleaseCreateRelease($input: CreateReplReleaseInput!) {\n    createReplRelease(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var h={},f=(0,u.Ps)(d(),s.FW),g=(0,u.Ps)(p(),s.FW),v="Something went wrong publishing your Template";function m(e){if(e.error)return e.error.message||v;if(e.data){if("createReplDeployment"in e.data){if("NotFoundError"===e.data.createReplDeployment.__typename||"UnauthorizedError"===e.data.createReplDeployment.__typename||"UserError"===e.data.createReplDeployment.__typename)return e.data.createReplDeployment.message;if("Repl"!==e.data.createReplDeployment.__typename)return v}if("createReplRelease"in e.data){if("NotFoundError"===e.data.createReplRelease.__typename||"UnauthorizedError"===e.data.createReplRelease.__typename||"UserError"===e.data.createReplRelease.__typename)return e.data.createReplRelease.message;if("Repl"!==e.data.createReplRelease.__typename)return v}}}function b(){var e,t,n,o,u=(0,i._)((e=(0,a._)({},h,void 0),c.D(f,e)),2),s=u[0],d=u[1],p=(0,i._)((t=(0,a._)({},h,void 0),c.D(g,t)),2),b=p[0],y=p[1];return{createRelease:(n=(0,r._)(function(e){var t,n;return(0,l.Jh)(this,function(r){switch(r.label){case 0:if(t=e.input,d.loading||y.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,b({refetchQueries:["ReplEnvironmentHeader"],variables:{input:t}})];case 2:return[2,{data:(n=r.sent()).data,error:m(n)}];case 3:return r.sent(),[2,{data:null,error:v}];case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),createDeployment:(o=(0,r._)(function(e){var t,n;return(0,l.Jh)(this,function(r){switch(r.label){case 0:if(t=e.input,d.loading||y.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,s({variables:{input:t}})];case 2:return[2,{data:(n=r.sent()).data,error:m(n)}];case 3:return r.sent(),[2,{data:null,error:v}];case 4:return[2]}})}),function(e){return o.apply(this,arguments)}),data:d.data||y.data,loading:d.loading||y.loading,error:m(d||y)}}},71565:function(e,t,n){n.d(t,{W:function(){return m},Z:function(){return b}});var r=n(41733),i=n(30509),l=n(66626),a=n(74985),o=n(85805),u=n(43973),s=n(2161),c=n(38080),d=n(56596),p=n(52924),h=n(88936),f=n(6620),g=n(29287),v=n(50959);function m(e){var t=(0,l._)((0,v.useState)(null),2),n=t[0],a=t[1],u=(0,l._)((0,v.useState)(null),2),s=u[0],c=u[1],d=(0,o.Z)({onUpload:function(t){var n=t.url;a(null),e(n)},onUploadPreview:function(e){var t=e.dataUrl;c(null),a(t)},onError:function(e){a(null),c(e.message)}}),p=(0,v.useCallback)(function(){return c(null)},[]);return(0,i._)((0,r._)({},d),{error:s,clearError:p,previewUrl:n})}function b(e){var t=(0,v.useRef)(null),n=e.size||48;return(0,a.BX)(d.G,{css:[g.l0.position.relative,{cursor:"pointer","&:hover .surface":{opacity:.8},"&:hover .icon":{opacity:1}}],onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},"aria-label":e.value?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",children:[e.value?(0,a.BX)(a.HY,{children:[(0,a.tZ)(s.ZP,{iconUrl:e.value,size:e.size,alt:"icon"}),(0,a.tZ)(c.Tg,{className:"surface",elevated:!0,css:[g.l0.borderRadius(8),g.l0.coverContainer,{opacity:e.isUploading?.8:0}]}),(0,a.tZ)(d.G,{className:"icon",css:[g.l0.coverContainer,g.l0.center,g.l0.color.accentPrimaryDefault,{overflow:"hidden",opacity:e.isUploading?1:0}],children:e.isUploading?(0,a.tZ)(h.Z,{}):(0,a.tZ)(p.Z,{})})]}):(0,a.tZ)(d.G,{css:[g.l0.center,g.l0.width(n),g.l0.height(n),g.l0.borderRadius(8),g.l0.color.foregroundDimmer,{border:"1px dashed "+g.TV.outlineDefault,"&:hover":{color:g.TV.accentPrimaryDefault,borderColor:g.TV.accentPrimaryDefault}}],children:(0,a.tZ)(f.Z,{})}),(0,a.tZ)("input",{css:[[g.l0.coverContainer,{opacity:0,zIndex:-1}]],ref:t,accept:u.W9.join(","),type:"file",onChange:function(t){var n=t.target,r=n.validity,i=n.files;if(r.valid){var l=i?i[0]:null;l&&e.onUpload(l)}}})]})}},9617:function(e,t,n){var r=n(42516),i=n(41733),l=n(30509),a=n(98924),o=n(74985),u=n(76999),s=n.n(u),c=n(97754),d=n.n(c),p=n(54237);n(50959),t.Z=function(e){var t,n=e.level,u=e.fontFamily,c=void 0===u?"sans-serif":u,h=e.fontWeight,f=void 0===h?"medium":h,g=e.foreground,v=void 0===g?1:g,m=e.align,b=void 0===m?"left":m,y=e.truncate,w=e.className,Z=void 0===w?"":w,_=e.children,R=(0,a._)(e,["level","fontFamily","fontWeight","foreground","align","truncate","className","children"]);return(0,o.BX)("h".concat(n),(0,l._)((0,i._)({},R),{className:s().dynamic([["e5be6eb40aa527b5",[p.Z.levels[n],p.Z.fontFamily[c],p.Z.fontWeight[f],p.Z.foreground[v],b]]])+" "+(d()("heading",(t={},(0,r._)(t,Z,!!Z),(0,r._)(t,"truncate",void 0!==y&&y),t))||""),children:[_,(0,o.tZ)(s(),{id:"e5be6eb40aa527b5",dynamic:[p.Z.levels[n],p.Z.fontFamily[c],p.Z.fontWeight[f],p.Z.foreground[v],b],children:".heading.__jsx-style-dynamic-selector{font-size:".concat(p.Z.levels[n],";font-family:").concat(p.Z.fontFamily[c],";font-weight:").concat(p.Z.fontWeight[f],";color:").concat(p.Z.foreground[v],";text-align:").concat(b,"}.truncate.__jsx-style-dynamic-selector{overflow:hidden;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis;max-width:100%}")})]}))}},36032:function(e,t,n){n.d(t,{Z:function(){return G}});var r=n(27387),i=n(66626),l=n(78950),a=n(63257),o=n(96583),u=n(74985),s=n(76999),c=n.n(s),d=n(79378),p=n(49344),h=n(29287),f=n(50831),g=n(9617),v=n(35972),m=n(63461),b=n(50959),y=n(41733),w=n(21262),Z=n(71440),_=n(58995);function R(){var e=(0,w._)(["\n  query BSODComponent {\n    currentUser {\n      id\n      username\n      image\n      isStaff: hasRole(role: REPLIT_STAFF)\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return R=function(){return e},e}var x={},C=(0,Z.Ps)(R()),S=n(63009),T=/at (.+) \((https:\/\/.+\.js):(\d+):(\d+)\)/,I=/at (https:\/\/.+\.js):(\d+):(\d+)/;function V(){return(V=(0,r._)(function(e){var t,u,s,c,d,p,h,f;function g(){return(g=(0,r._)(function(e){var n,r,i;return(0,o.Jh)(this,function(l){switch(l.label){case 0:if(n=t.get(e))return[2,n];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,fetch(e).then(function(e){return e.json()})];case 2:return r=l.sent(),i=new u.SourceMapConsumer(r),t.set(e,i),[2,i];case 3:return l.sent(),[2,null];case 4:return[2]}})})).apply(this,arguments)}return(0,o.Jh)(this,function(v){switch(v.label){case 0:t=new Map,v.label=1;case 1:return v.trys.push([1,3,,4]),[4,n.e(4552).then(n.t.bind(n,94552,19))];case 2:return u=v.sent(),[3,4];case 3:throw v.sent(),Error("source-map not available");case 4:var m;if(!(s=e.stack))throw Error("expected error.stack to be defined");return c=s.split("\n").map(function(e){return e.trim()}).filter(function(e){return!!e}),p=(d=(0,l._)(c))[0],[4,Promise.all(d.slice(1).map((m=(0,r._)(function(e){var t,n,r,l,a,u,s,c,d,p;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(T.test(e)){if(!(a=T.exec(e)))throw Error("expected result");n=(u=(0,i._)(a.slice(2),3))[0],r=u[1],l=u[2]}else{if(!I.test(e))return[2,e];if(!(s=I.exec(e)))throw Error("expected result");n=(c=(0,i._)(s.slice(1),3))[0],r=c[1],l=c[2]}return[4,function(e){return g.apply(this,arguments)}("".concat(n,".map"))];case 1:if(!(d=o.sent()))return[2,"    ".concat(e)];if(p=d.originalPositionFor({line:Number(r),column:Number(l)}),t)return[2,"    at ".concat(p.name," (").concat(p.source,":").concat(p.line,":").concat(p.column,")")];return[2,"    at ".concat(p.source,":").concat(p.line,":").concat(p.column)]}})}),function(e){return m.apply(this,arguments)})))];case 5:return h=v.sent(),Object.assign(f=Error(),{name:e.name,stack:[p].concat((0,a._)(h)).join("\n"),message:e.message},e),[2,f]}})})).apply(this,arguments)}var U=function(e){var t=e.bsod,n=(0,i._)((0,b.useState)(null),2),l=n[0],a=n[1];(0,b.useEffect)(function(){(0,r._)(function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,function(e){return V.apply(this,arguments)}(t.error)];case 1:return a(e.sent()),[3,3];case 2:return e.sent(),[2];case 3:return[2]}})})()},[t.error]);var s=(0,b.useMemo)(function(){var e,n,r,i;return l?null!==(r=null===(n=l.stack)||void 0===n?void 0:n.split("\n"))&&void 0!==r?r:[]:null!==(i=null===(e=t.error.stack)||void 0===e?void 0:e.split("\n"))&&void 0!==i?i:[]},[l,t.error.stack]);return(0,u.tZ)("div",{css:[h.l0.p(16),h.l0.width("100%"),h.l0.backgroundColor.backgroundHigher,h.l0.borderRadius(8),h.l0.overflowY("hidden"),{whiteSpace:"pre"}],children:(0,u.tZ)(v.gC,{spacing:1,children:(0,u.BX)("div",{css:[h.l0.font.code,h.l0.fontSize(12)],children:[(0,u.BX)("div",{children:["Origin: ",t.origin]}),null==s?void 0:s.map(function(e,t){var n=e.replace("webpack-internal:///./",""),r=n.includes("node_modules");return(0,u.tZ)("div",{css:r?h.l0.color.foregroundDimmest:null,children:n},t)})]})})})},G=function(){var e,t,n,r=(0,i._)((0,S.qg)(),1)[0],l=(e=(0,y._)({},x,{skip:!r}),_.a(C,e)),a=l.data,o=l.loading;if((0,S.ic)(),!r)return null;var s=(null==a?void 0:null===(t=a.currentUser)||void 0===t?void 0:t.isStaff)||(null==a?void 0:null===(n=a.currentUser)||void 0===n?void 0:n.isAdmin);return(0,u.BX)(p.u,{isOpen:!0,preventClose:!0,onRequestClose:function(){},maxWidth:872,children:[(0,u.BX)(v.gC,{spacing:2,align:"center",children:[(0,u.tZ)(g.Z,{level:2,children:" Your Repl is having a bit of trouble."}),(0,u.tZ)("div",{className:c().dynamic([["d03b8962c5704815",[h.n0]]])+" spacer"}),(0,u.tZ)(m.Z,{size:"large",children:"The issue has been logged and the Replit team will look into it. Try reloading the page to get back to coding."}),(0,u.tZ)("div",{css:[h.l0.p(16),h.l0.width("100%"),h.l0.backgroundColor.backgroundHigher,h.l0.borderRadius(8)],className:c().dynamic([["d03b8962c5704815",[h.n0]]]),children:(0,u.BX)(v.gC,{spacing:1,children:[!o&&(null==a?void 0:a.currentUser)?(0,u.BX)(v.Ug,{spacing:2,align:"center",children:[(0,u.tZ)(d.q,{src:a.currentUser.image,username:a.currentUser.username,size:48}),(0,u.tZ)(m.Z,{size:"medium",children:a.currentUser.username})]}):null,(0,u.BX)("div",{css:[h.l0.font.code],className:c().dynamic([["d03b8962c5704815",[h.n0]]]),children:["Error: ",r.eventId]})]})}),s?(0,u.tZ)(U,{bsod:r}):null,(0,u.tZ)("div",{className:c().dynamic([["d03b8962c5704815",[h.n0]]])+" spacer"}),(0,u.tZ)(f.Z,{onClick:function(){return window.location.reload()},color:"primary",filled:!0,fullWidth:!0,children:"reload"}),!1]}),(0,u.tZ)(c(),{id:"d03b8962c5704815",dynamic:[h.n0],children:".sentry-error-embed-wrapper{z-index:".concat(h.n0,"!important}")})]})}}}]);
//# sourceMappingURL=384-f744d08f3e1927fa.js.map